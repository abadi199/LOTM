pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
--main

STATE={}
STATE.IDLE=0
STATE.WALK_DOWN=1
STATE.WALK_UP=2
STATE.WALK_LEFT=3
STATE.WALK_RIGHT=4

function _init()
	make_house()
	make_player()
	make_coins()
end

function _update()
	move_player()
	update_coins()
end

function _draw()
	cls()
	draw_map()
	draw_house()
	-- draw_coins()
	draw_player()
end
-->8
--player
function make_player()
	player={}
	player.x=64
	player.y=64
	player.sprite=2
	player.timer=0
	player.state=STATE.IDLE
	player.flip=false
end

function move_player()
	player.timer+=1
	if btn(⬅️) then 
		player.x-=1 
		change_state(player,STATE.WALK_LEFT)
		move_left()
	elseif btn(➡️) then 
		player.x+=1 
		change_state(player,STATE.WALK_RIGHT)
		move_right()
	elseif btn(⬆️) then
		player.y-=1 
		change_state(player,STATE.WALK_UP)
		move_up()
	elseif btn(⬇️) then 
		player.y+=1 
		change_state(player,STATE.WALK_DOWN)
		move_down()
	else
		change_state(player,STATE.IDLE)
		idle()
	end
end

function change_state(object, state)
	if object.state!=state then 
		object.state=state
		object.timer=0
		object.flip=false
	end
end

function move_down()
	move(2,4,0)
	player.flip=false
end

function move_up()
	move(8,10,6)
	player.flip=false
end

function move_left()
	move(40,42,38)
	player.flip=true
end

function move_right()
	move(40,42,38)
	player.flip=false
end

function move(center,left,right)
	if player.timer < 3 then 
		player.sprite=center
	elseif player.timer < 6 then 
		player.sprite=right
	elseif player.timer < 9 then 
		player.sprite=center
	elseif player.timer < 12 then
		player.sprite=left
	elseif player.timer < 15 then
		player.timer=1
	end
end

function idle()
	player.sprite=2
end

function draw_player()
	spr(player.sprite,player.x,player.y,2,2,player.flip)
end

function draw_map()
	map(0,0,0,0,64,64)
end
-->8
--coins
function make_coins()
	coin={}
	coin.visible=true
	coin.x=36
	coin.y=36
	coin.sprite=47
end

function update_coins()
	if coin.visible and 
		player.x+6>=coin.x and player.x+6<coin.x+8 and
		player.y+1>=coin.y and player.y+1<coin.y+8 then
		sfx(0)
		coin.visible=false
	end
end

function draw_coins()
	if coin.visible then
		spr(coin.sprite,coin.x,coin.y)
	end
end
-->8
--house
function make_house()
	house={}
end

function draw_house()
	draw_roof()
	draw_wall()
end

function draw_roof()
	start_x=16
	start_y=24
	n=3
	for i=0,n-1 do
		spr(64,start_x+(i*16),start_y-(i*8))
		spr(65,start_x+(i*16)+8,start_y-(i*8))

		spr(65,start_x+((n+i)*16),start_y-((n-1-i)*8),1,1,true)
		spr(64,start_x+((n+i)*16)+8,start_y-((n-1-i)*8),1,1,true)
	end
	-- spr(64,start_x,start_y)
	-- spr(65,start_x+8,start_y)
	-- spr(64,start_x+16,start_y-8)
	-- spr(65,start_x+24,start_y-8)
end

function draw_wall()
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000212221200000000000000000000
00000888888000000000088888800000000008888880000000000888888000000000088888800000000008888880000000102111111020100000000000000000
000008f8ff800000000008f8ff800000000008f8ff80000000000888888000000000088888800000000008888880000001011022222102000000000000000000
00000f1ff1f0000000000f1ff1f0000000000f1ff1f0000000000888888000000000088888800000000008888880000000211211100200200000000000000000
00000ffffff0000000000ffffff0000000000ffffff0000000000888888000000000088888800000000008888880000002012112221020020000000000000000
00000ff444f0000000000ff444f0000000000ff444f0000000000f8888f0000000000f8888f0000000000f8888f0000002021121112112020000000000000000
00000ffffff0000000000ffffff0000000000ffffff0000000000ffffff0000000000ffffff0000000000ffffff0000001121211211112020000000000000000
00001111111100000000111111110000000011111111000000001111111100000000111111110000000011111111000002111212121202110000000000000000
00011111111110000001111111111000000111111111100000011111111110000001111111111000000111111111100002121211121212120000000000000000
000f01111110f00000f001111110f00000f001111110f000000f01111110f00000f001111110f00000f001111110f00002121122211202120000000000000000
000f011111100f000f00011111100f000f0001111110f000000f011111100f000f00011111100f000f0001111110f00002012111112102120000000000000000
00000cccccc0000000000cccccc0000000000cccccc0000000000cccccc0000000000cccccc0000000000cccccc0000000201212221020120000000000000000
00000cc00cc0000000000cc00cc0000000000cc00cc0000000000cc00cc0000000000cc00cc0000000000cc00cc0000000020111001201200000000000000000
00000f000f00000000000f000f00000000000f000f00000000000f000f00000000000f000f00000000000f000f00000002012122122002100000000000000000
000088000f00000000000f000f00000000000f0008800000000088000f00000000000f000f00000000000f000880000010200000110021000000000000000000
00000000088000000000880008800000000088000000000000000000088000000000880008800000000088000000000000022222212200100000000000000000
33333333333333333333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000aaaa00
333333333333333333333333333333333333333333b3b3330000088888800000000008888880000000000888888000000000000000000000000000000aa7aaa0
3333333333333333333333333333333333333333333b3333000008888f800000000008888f800000000008888f800000000000000000000000000000aa7aaaaa
33333333333333333333333333333333333333333333333300000888f1f0000000000888f1f0000000000888f1f00000000000000000000000000000a7aaaa9a
33333333333333333333333333333333333b3b333333333300000888fff0000000000888fff0000000000888fff00000000000000000000000000000aaaaaa9a
33333333333333333333333333333333333b3b33333333330000088fff4000000000088fff4000000000088fff400000000000000000000000000000aaaaa9aa
33333333a333333333333333333333333333b3333333333300000ffffff0000000000ffffff0000000000ffffff000000000000000000000000000000aa99aa0
3333333a9a3333333333333333333333333333333333333300000111111000000000011111100000000001111110000000000000000000000000000000aaaa00
33333333a33333333333333333333333333333333333333300000111111000000000011111100000000001111110000000000000000000000000000000000000
3333333333333333333333333333333333333333333333330000011f111000000000011f111000000000011f1110000000000000000000000000000000000000
3333a333333333333333333333333333333333333b3b333300000111f110000000000111f110000000000111f110000000000000000000000000000000000000
333a9a33333333333333333333333333333333333b3b333300000cccccc0000000000cccccc0000000000cccccc0000000000000000000000000000000000000
3333a3333333333333333333333333333333333333b33333000000cc0c000000000000cc0c000000000000cc0c00000000000000000000000000000000000000
333333333333333333333333333333333333333333333333000000f00f000000000000f00f000000000000f000f0000000000000000000000000000000000000
333333333333333333333333333333333333333333333333000000880f000000000000f00f000000000000f00088000000000000000000000000000000000000
33333333333333333333333333333333333333333333333300000000088000000000008808800000000000880000000000000000000000000000000000000000
00000000000000550000005557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000055440000554557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005544440055444557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000554444445544444557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000055444444444444444557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005544444444444444444557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00554444444444444444444557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55444444444444444444444555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444444444457777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444444444457777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444444444457777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444444444457777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444444445557777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444444557757777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444444455777757777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444445577777757777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444557777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444455777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444445577777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444557777777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444455777777777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54445577777777777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54550577777777777777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55000577777777775555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000004444444444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000004444444444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044000000000000004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000004444444444444444444444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000004444444444444444444444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044999999999999999999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044444444444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000044444444444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000055000000000000000057777777777000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000005545000000000000000057777777777000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000554445000000000000000057777777777000000000004444444444444444444444000000000000000000000000000000000000
00000000000000000000000055444445000000000000000057777777777000000000004444444444444444444444000000000000000000000000000000000000
00000000000000000000005544444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000000000000000554444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000000000000055444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000000000005544444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000000000554444444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000000055444444444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000005544444444444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000000554444444444444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00000055444444444444444444444445000000000000000057777777777000000000000044000000000000004400000000000000000000000000000000000000
00005544444444444444444444444445000000000000000057777777777000000004444444444444444444444444440000000000000000000000000000000000
00554444444444444444444444444445000000000000000057777777777000000004444444444444444444444444440000000000000000000000000000000000
55444444444444444444444444444445000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444444444444444455000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444444444444445577000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444444444444557777000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444444444455777777000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444444445577777777000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444444557777777777000000000000000057777777777000000000044999999999999999999944000000000000000000000000000000000000
54444444444444444455777777777777000000000000000057777777777000000000044444444444444444444444000000000000000000000000000000000000
54444444444444445577777777777777000000000000000057777777777000000000044444444444444444444444000000000000000000000000000000000000
54444444444444557777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
54444444444455777777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
54444444445577777777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
54444444557777777777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
54444455777777777777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
54445577777777777777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
54550577777777777777777777777777000000000000000057777777777777770000000000000000000000000000000000000000000000000000000000000000
55000577777777777777777777777777000000000000000055555555555555550000000000000000000000000000000000000000000000000000000000000000
__map__
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
2222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
__sfx__
000500002d0500e000380503805038030380203802038010270002700027000110000f0002e0002f0002e00032000300003500000000000000000000000000000000000000000000000000000000000000000000
